<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>登录</title>

<!-- 新 Bootstrap 核心 CSS 文件 -->
<link rel="stylesheet" href="./css/bootstrap.min.css">

<!-- jQuery文件。务必在bootstrap.min.js 之前引入 -->
<script src="./js/jquery.min.js"></script>

<!-- 最新的 Bootstrap 核心 JavaScript 文件 -->
<script src="./js/bootstrap.min.js"></script>
<link href="./css/signin.css" rel="stylesheet">

<!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
<!--[if lt IE 9]>
  <script src="./js/html5shiv.js"></script>
  <script src="./js/respond.min.js"></script>
<![endif]-->
<!--[if lt IE 10]>
<script src="./assets/js/placeholder.js"></script>
<![endif]-->
</head>
  <body>

    <div class="container">

      <form class="form-signin" role="form" action="./user/login">
        <h2 class="form-signin-heading">泺源派出所搜索登录</h2>
        <input type="uname" id="uname" name="uname" class="form-control" placeholder="用户名" required autofocus>
        <input type="password" name="pwd" id="pwd" class="form-control" placeholder="密码" required>
        <div class="checkbox">
        </div>
        <br/>
        <button class="btn btn-lg btn-primary btn-block" type="button" onclick="login()">登录</button>
      </form>

    </div> <!-- /container -->


    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <script src="../../assets/js/ie10-viewport-bug-workaround.js"></script>

    <script type="text/javascript">
      function login() {
        jQuery.ajax({
          type: "POST",
          url: "/user/login",
          data: "uname="+jQuery("#uname").val()+"&pwd="+jQuery("#pwd").val(),
          success: function(data){
//            var result = JSON.parse(data);
            if(data.code == 1){
              window.location.href="/index";
            }else if(data.code == 4){
              alert("用户名或密码错误")
            }else{
              alert("系统错误")
            }
          },
          error: function (XMLHttpRequest, textStatus, errorThrown) {
            alert("系统异常")
          }
        });
      }
    </script>
  </body>
</html>
